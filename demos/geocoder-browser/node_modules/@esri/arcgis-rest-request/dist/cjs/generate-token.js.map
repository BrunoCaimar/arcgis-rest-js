{"version":3,"file":"generate-token.js","sourceRoot":"","sources":["../../src/generate-token.ts"],"names":[],"mappings":";AAAA;gBACgB;;;AAGhB,6CAAsE;AAStE,SAAgB,aAAa,CAC3B,GAAW,EACX,cAAoC;IAEpC,MAAM,OAAO,GAAoB,cAAc,CAAC;IAEhD,0BAA0B;IAC1B,IACE,OAAO,MAAM,KAAK,WAAW;QAC7B,MAAM,CAAC,QAAQ;QACf,MAAM,CAAC,QAAQ,CAAC,IAAI,EACpB;QACA,OAAO,CAAC,MAAM,CAAC,OAAO,GAAG,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC;KAC/C;SAAM;QACL,OAAO,CAAC,MAAM,CAAC,OAAO,GAAG,0CAA6B,CAAC;KACxD;IAED,OAAO,IAAA,oBAAO,EAAC,GAAG,EAAE,OAAO,CAAC,CAAC;AAC/B,CAAC;AAlBD,sCAkBC","sourcesContent":["/* Copyright (c) 2017-2018 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\n\nimport { ITokenRequestOptions } from \"./utils/ITokenRequestOptions.js\";\nimport { request, NODEJS_DEFAULT_REFERER_HEADER } from \"./request.js\";\nimport { IRequestOptions } from \"./utils/IRequestOptions.js\";\n\nexport interface IGenerateTokenResponse {\n  token: string;\n  expires: number;\n  ssl: boolean;\n}\n\nexport function generateToken(\n  url: string,\n  requestOptions: ITokenRequestOptions\n): Promise<IGenerateTokenResponse> {\n  const options: IRequestOptions = requestOptions;\n\n  /* istanbul ignore else */\n  if (\n    typeof window !== \"undefined\" &&\n    window.location &&\n    window.location.host\n  ) {\n    options.params.referer = window.location.host;\n  } else {\n    options.params.referer = NODEJS_DEFAULT_REFERER_HEADER;\n  }\n\n  return request(url, options);\n}\n"]}